<template>
  <el-button @click="clearFilter">æ¸…ç©ºé€‰æ‹©</el-button>
  <el-table :data="tableData" style="width: 100%" max-height="420">
    <el-table-column fixed prop="questionId" label="é—®é¢˜Id" width="120" align="center" />
    <el-table-column prop="questionName" label="é—®é¢˜åç§°" width="120" align="center" />
    <el-table-column prop="questionPriority" label="é—®é¢˜ä¼˜å…ˆçº§" width="120" align="center" />
    <el-table-column prop="userName" label="ðŸ§ ç»åŠžäºº" width="120" align="center" :filters="users"
                     :filter-method="filterTagForUser" filter-placement="bottom-end">
      <template #default="item">{{ item.row.userName }}</template>
    </el-table-column>
    <el-table-column prop="questionState" label="é—®é¢˜çŠ¶æ€" width="120" align="center"
                     :filters="questionType"
                     :filter-method="filterTagForState" filter-placement="bottom-end">
      <template #default="item">
        <el-tag :type="item.row.questionState === 'å¾…å®Œæˆ' ? 'warning' : (item.row.questionState === 'å·²å®Œæˆ' ? 'success' : '')"
            disable-transitions>{{ item.row.questionState }}</el-tag>
      </template>
    </el-table-column>
    <el-table-column prop="questionBeginTime" label="â³ å¼€å§‹æ—¶é—´" width="120" align="center" />
    <el-table-column prop="questionEndTime" label="âŒ›ï¸ ç»“æŸæ—¶é—´" width="120" align="center" />
    <el-table-column fixed="right" label="æ“ä½œ" width="120" align="center">
      <template #default="index">
        <el-button link type="primary" size="small" @click.prevent="deleteRow(index.row.questionId)">
          æŸ¥çœ‹
        </el-button>
      </template>
    </el-table-column>
  </el-table>

</template>

<script>
import { ref } from 'vue'

export default {
  name: "Table",

  setup(props) {
    const now = new Date()

    const users = [
      { text: 'æ…§å¼º', value: 'æ…§å¼º' },
      { text: 'æ»”æ»”', value: 'æ»”æ»”' },
      { text: 'å ƒèŠƒ', value: 'å ƒèŠƒ' },
      { text: 'ç‘žç¥¥', value: 'ç‘žç¥¥' },
    ]
    const questionType = [
      { text: 'å¾…å®Œæˆ', value: 'å¾…å®Œæˆ' },
      { text: 'è¿›è¡Œä¸­', value: 'è¿›è¡Œä¸­' },
      { text: 'å·²å®Œæˆ', value: 'å·²å®Œæˆ' },
    ]

    const tableData= ref([
      {
        questionId: '2427-1-1',
        questionName: 'éœ€æ±‚åˆ†æž',
        questionPriority: 'é«˜',
        userName: 'æ…§å¼º',
        questionState: 'å¾…å®Œæˆ',
        questionBeginTime: '',
        questionEndTime: '2023-12-24',
      },
      {
        questionId: '2427-1-1',
        questionName: 'éœ€æ±‚åˆ†æž',
        questionPriority: 'é«˜',
        userName: 'æ»”æ»”',
        questionState: 'è¿›è¡Œä¸­',
        questionBeginTime: '2023-10-06',
        questionEndTime: '2023-12-24',
      },
      {
        questionId: '2427-1-1',
        questionName: 'éœ€æ±‚åˆ†æž',
        questionPriority: 'é«˜',
        userName: 'æ…§å¼º',
        questionState: 'å·²å®Œæˆ',
        questionBeginTime: '2023-10-06',
        questionEndTime: '2023-12-24',
      },
      {
        questionId: '2427-1-1',
        questionName: 'éœ€æ±‚åˆ†æž',
        questionPriority: 'é«˜',
        userName: 'ç‘žç¥¥',
        questionState: 'è¿›è¡Œä¸­',
        questionBeginTime: '2023-10-06',
        questionEndTime: '2023-12-24',
      },
      {
        questionId: '2427-1-1',
        questionName: 'éœ€æ±‚åˆ†æž',
        questionPriority: 'é«˜',
        userName: 'æ…§å¼º',
        questionState: 'å·²å®Œæˆ',
        questionBeginTime: '2023-10-06',
        questionEndTime: '2023-12-24',
      },
      {
        questionId: '2427-1-1',
        questionName: 'éœ€æ±‚åˆ†æž',
        questionPriority: 'é«˜',
        userName: 'å ƒèŠƒ',
        questionState: 'è¿›è¡Œä¸­',
        questionBeginTime: '2023-10-06',
        questionEndTime: '2023-12-24',
      },
    ])

    const filterTagForUser = (value, row) => {
      return row.userName === value
    }
    const filterTagForState = (value, row) => {
      return row.questionState === value
    }

    return {
      now,
      users,
      questionType,
      tableData,
      filterTagForUser,
      filterTagForState,
    }
  },

  methods: {
    deleteRow: function(questionId) {
      console.log(questionId)
    },
  },
}
</script>

<style scoped>

</style>
